import{n as k,D as v,r as f,y as M,x as E,O as j,k as t,I as D,F as g,G as w,H as d,J as C,K as b,S as V,o as T,p as O,q as B,V as L,s as q,U as N,P as I,Q as z}from"./index-DcRyME2P.js";import{B as u}from"./badge-Qbeducio.js";import{z as o,u as U,t as Y,F as A,a as G,b as H,c as J,d as K}from"./form-DQyKwz1O.js";const _=k("/create-production-line")({component:Q});function Q(){const[s,c]=v(e=>[e.currentProductionLine,e.setCurrentProductionLine]),[i,m]=f.useState(s.productionSteps.filter(e=>"maintenanceTimeInMinutes"in e)),[r,h]=f.useState(s.productionSteps.filter(e=>"employees"in e)),P=M(e=>e.robots),y=E(e=>e.stations);function p(e){let n=!1;return r.forEach(a=>{a.uuid===e.uuid&&(n=!0)}),n}function x(e){let n=!1;return i.forEach(a=>{a.uuid===e.uuid&&(n=!0)}),n}const R=o.object({productionLine:o.object({name:o.string().min(2).max(50),productionSteps:o.array(o.object({})),uuid:o.string().min(2).max(50),simulationStatus:o.nativeEnum(j)})}),l=U({resolver:Y(R),defaultValues:{productionLine:{name:s.name||"",productionSteps:s.productionSteps,simulationStatus:j.STOPPED,uuid:s.uuid||""}}}),S=e=>{let n=!0;i.length+r.length<3&&(N("The production line will be created but the state will be incomplete. You need to add at least 3 production steps."),n=!1);const a={...e.productionLine,productionSteps:[...i,...r],status:n?I.READY:I.INCOMPLETE,vehicleModel:s.vehicleModel};z(a).catch(F=>{N(F.message)})};return t.jsx(t.Fragment,{children:t.jsx(A,{...l,children:t.jsxs("form",{onSubmit:l.handleSubmit(S),className:"flex justify-center pt-10 gap-4 flex-col px-24",children:[t.jsx(G,{control:l.control,name:"productionLine.name",render:({field:e})=>t.jsxs(H,{children:[t.jsx(J,{children:t.jsx(u,{className:"text-white",children:"Production Line name"})}),t.jsx(K,{children:t.jsx(D,{placeholder:"Production Line name",className:"w-full",required:!0,...e})})]})}),t.jsx(u,{className:"text-white w-36 flex justify-center mt-4",children:"Production steps:"}),t.jsxs("div",{className:"flex flex-row gap-4 justify-start border-b pt-4 pb-2",children:[t.jsx(u,{className:"text-white w-1/6 flex justify-center",children:"Stations"}),t.jsx("div",{className:"w-1/3 rounded-lg",children:t.jsxs(g,{children:[t.jsx(w,{asChild:!0,className:"w-max",children:t.jsx(d,{variant:"outline",className:"flex justify-start w-max",children:r.length?r.length:"Select Stations"})}),t.jsx(C,{children:y.map(e=>t.jsx(b,{checked:p(e),onCheckedChange:()=>{p(e)?(h(r.filter(n=>n.uuid!==e.uuid)),c({...s,productionSteps:s.productionSteps.filter(n=>n.uuid!==e.uuid)})):(h([...r,e]),c({...s,productionSteps:[...s.productionSteps,e]}))},children:e.name},e.uuid))})]})}),t.jsx(u,{className:"text-white w-1/6 flex justify-center",children:"Robots"}),t.jsx("div",{className:"w-1/3 rounded-lg",children:t.jsxs(g,{children:[t.jsx(w,{asChild:!0,className:"text-sm",children:t.jsx(d,{variant:"outline",className:"flex justify-start w-max",children:i.length>0?i.length:"Select Robots"})}),t.jsx(C,{children:P.map(e=>t.jsx(b,{checked:x(e),onCheckedChange:()=>{console.log("robot",e),x(e)?(m(i.filter(n=>n.uuid!==e.uuid)),c({...s,productionSteps:s.productionSteps.filter(n=>n.uuid!==e.uuid)})):(m([...i,e]),c({...s,productionSteps:[...s.productionSteps,e]}))},children:e.name},e.uuid))})]})})]}),t.jsx(u,{className:"text-white w-36",children:"Vehicle Model"}),t.jsxs(V,{children:[t.jsx(T,{children:t.jsx(O,{placeholder:(s==null?void 0:s.vehicleModel)||"Select Vehicle Model"})}),t.jsx(B,{children:Object.values(L).filter(e=>e.toString().length>1).map(e=>t.jsx(q,{value:e,onClick:()=>c({...s,vehicleModel:L[e]}),children:e.toString()},e))})]}),t.jsx(d,{type:"submit",className:"bg-primary text-white",onClick:()=>S(l.getValues()),children:"Create Production Line"})]})})})}export{_ as Route};
